{"version":3,"sources":["services/persons.js","components/DisplayPhoneNum.js","components/SearchByName.js","components/AddPersonForm.js","components/DisplayMessage.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","id","patched","patch","concat","delete","DisplayPhoneNum","_ref","persons","handleDeleteClick","react_default","a","createElement","Fragment","map","person","key","name","number","onClick","SearchByName","keyword","handleChange","searchFunc","value","onChange","AddPersonForm","props","handleSubmit","newName","states","newPhoneNum","phone","handleNameChange","handlePhoneChange","onSubmit","required","type","DisplayMessage","message","style","isError","borderStyle","borderColor","borderRadius","color","fontSize","padding","marginTop","text","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewPhoneNum","_useState7","_useState8","setKeyword","_useState9","_useState10","renderPersons","setRenderPersons","_useState11","_useState12","setMessage","useEffect","PersonService","initialData","handleStateChange","stateSetter","event","target","createMessage","timer","setTimeout","clearTimeout","formState","formHandleFunc","components_SearchByName","string","trim","searchResult","filter","x","subString","toLowerCase","includes","components_AddPersonForm","preventDefault","console","log","existedIndex","findIndex","personObject","messageText","window","confirm","newData","catch","error","alert","components_DisplayPhoneNum","deletedPerson","find","components_DisplayMessage","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.746b5729.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst createPerson = newPerson => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updatePerson = (id, patched) => {\r\n    const request = axios.patch(`${baseUrl}/${id}`, patched)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    createPerson,\r\n    updatePerson,\r\n    deletePerson\r\n}","import React from 'react'\r\n\r\nconst DisplayPhoneNum = ({ persons, handleDeleteClick }) => {\r\n    return (\r\n        <>\r\n            <h2>Numbers</h2>\r\n            <table>\r\n                <tbody>\r\n                    {persons.map(person =>\r\n                        <tr key={person.id}>\r\n                            <td>{person.name}</td>\r\n                            <td>{person.number}</td>\r\n                            <td>\r\n                                <button\r\n                                    onClick={handleDeleteClick(person.id)}>\r\n                                    Delete</button>\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default DisplayPhoneNum","import React from 'react'\r\n\r\nconst SearchByName = ({ keyword, handleChange, searchFunc }) => (\r\n    <>\r\n        <div>\r\n            <input value={keyword}\r\n                onChange={handleChange} />\r\n        </div>\r\n        <button onClick={searchFunc}>Search</button>\r\n    </>\r\n)\r\n\r\nexport default SearchByName","import React from 'react'\r\n\r\nconst AddPersonForm = (props) => {\r\n    const handleSubmit = props.handleSubmit\r\n    const newName = props.states.name\r\n    const newPhoneNum = props.states.phone\r\n    const handleNameChange = props.handleChange.name\r\n    const handlePhoneChange = props.handleChange.phone\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                name:\r\n                <input value={newName} required\r\n                    onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                phone number:\r\n                <input value={newPhoneNum} required\r\n                    onChange={handlePhoneChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default AddPersonForm","import React from 'react'\r\n\r\nconst DisplayMessage = ({ message }) => {\r\n    const errorStyle = {\r\n        borderStyle: 'solid',\r\n        borderColor: 'red',\r\n        borderRadius: 3,\r\n        color: 'red',\r\n        fontSize: 20,\r\n        padding: 10,\r\n        marginTop:10\r\n    }\r\n\r\n    const messageStyle = {\r\n        borderStyle: 'solid',\r\n        borderColor: 'green',\r\n        borderRadius: 3,\r\n        color: 'green',\r\n        fontSize: 20,\r\n        padding: 10,\r\n        marginTop:10\r\n    }\r\n\r\n    if (message === null) {\r\n        return null\r\n    } else {\r\n        return (\r\n            <div\r\n                style={message.isError\r\n                    ? errorStyle\r\n                    : messageStyle}>\r\n                {message.text}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DisplayMessage","import React from 'react'\nimport { useState, useEffect } from 'react'\nimport PersonService from './services/persons'\nimport DisplayPhoneNum from './components/DisplayPhoneNum'\nimport SearchByName from './components/SearchByName'\nimport AddPersonForm from './components/AddPersonForm'\nimport DisplayMessage from './components/DisplayMessage'\n\nconst App = () => {\n   const [persons, setPersons] = useState([])\n   const [newName, setNewName] = useState('')\n   const [newPhoneNum, setNewPhoneNum] = useState('')\n   const [keyword, setKeyword] = useState('')\n   const [renderPersons, setRenderPersons] = useState(persons)\n   const [message, setMessage] = useState(null)\n\n   useEffect(() => {\n      PersonService.getAll()\n         .then(initialData => {\n            setPersons(initialData)\n            setRenderPersons(initialData)\n         })\n   }, [])\n\n   const isEmptyString = (string) =>\n      string.trim() === '' || string === null\n\n   const containInsensitive = (string, subString) =>\n      string.trim().toLowerCase()\n         .includes(subString.trim().toLowerCase())\n\n   const searchPersons = () => {\n      if (isEmptyString(keyword)) {\n         setRenderPersons(persons)\n      }\n      else {\n         let searchResult = persons.filter((x) =>\n            containInsensitive(x.name, keyword))\n         setRenderPersons(searchResult)\n      }\n   }\n\n   const addName = (event) => {\n      event.preventDefault()\n      console.log('current data: ', persons)\n      let existedIndex = persons\n         .findIndex(x => x.name === newName)\n      // console.log(event.target)\n\n      const personObject = {\n         name: newName,\n         number: newPhoneNum\n      }\n\n      // add person to list if not exist or alert\n      if (existedIndex === -1) {\n         PersonService.createPerson(personObject)\n            .then(response => {\n               let messageText = `add ${response.name}`\n\n               setPersons(persons.concat(response))\n               setRenderPersons(persons.concat(response))\n               setNewName('')\n               setNewPhoneNum('')\n               createMessage(messageText, false)\n            })\n\n      }\n      else {\n         console.log('existed index: ', existedIndex)\n         if (persons[existedIndex].number !== personObject.number) {\n            if (window.confirm('update id: ' + existedIndex\n               + ', name: ' + personObject.name)) {\n               console.log('updating ', persons[existedIndex])\n               PersonService.updatePerson(existedIndex + 1, personObject)\n                  .then(response => {\n                     let newData = persons\n                        .map(person => person.id !== (existedIndex + 1) ?\n                           person : response)\n                     let messageText = `updated ${response.name}`\n\n                     console.log(newData)\n                     setPersons(newData)\n                     setRenderPersons(newData)\n                     setNewName('')\n                     setNewPhoneNum('')\n                     createMessage(messageText, false)\n                  })\n                  .catch(error => {\n                     let newData = persons\n                        .filter(person => person.id !== existedIndex + 1)\n                     let messageText = `Information of ${personObject.name} `\n                        + 'has been deleted from the server'\n                     console.log(newData)\n\n                     setPersons(newData)\n                     setRenderPersons(newData)\n                     createMessage(messageText, true)\n                  })\n            }\n         } else {\n            alert(newName + \" is already added to phone book\")\n         }\n      }\n   }\n\n   const handleStateChange = (stateSetter) => {\n      return (event) => {\n         stateSetter(event.target.value)\n      }\n   }\n\n   const handleDeleteClick = (id) => {\n      return () => {\n         if (window.confirm('delete person?')) {\n            let deletedPerson = persons\n               .find(person => person.id === id)\n\n            console.log('deleting ', id)\n            PersonService.deletePerson(id)\n               .then(() => {\n                  let newData = persons\n                     .filter(person => person.id !== id)\n                  let messageText = `deleted ${deletedPerson.name}`\n\n                  console.log(newData)\n                  setPersons(newData)\n                  setRenderPersons(newData)\n                  createMessage(messageText, false)\n\n                  return\n               })\n               .catch(error => {\n                  let messageText = `Information of ${deletedPerson.name} `\n                     + 'has been deleted from the server'\n\n                  createMessage(messageText, true)\n               })\n         }\n      }\n   }\n\n   const createMessage = (text, isError) => {\n      setMessage({ text, isError })\n\n      const timer = setTimeout(() => {\n         setMessage(null)\n         clearTimeout(timer)\n      }, 5000)\n\n   }\n\n   const formState = { name: newName, phone: newPhoneNum }\n   const formHandleFunc = {\n      name: handleStateChange(setNewName),\n      phone: handleStateChange(setNewPhoneNum)\n   }\n\n   return (\n      <div>\n         <h2>Phonebook</h2>\n\n         <SearchByName keyword={keyword}\n            handleChange={handleStateChange(setKeyword)}\n            searchFunc={searchPersons} />\n\n         <AddPersonForm handleSubmit={addName}\n            states={formState}\n            handleChange={formHandleFunc}\n            createMessage={createMessage} />\n\n         <DisplayPhoneNum persons={renderPersons}\n            handleDeleteClick={handleDeleteClick} />\n\n         <DisplayMessage message={message} />\n      </div>\n   )\n}\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)\n"],"sourceRoot":""}